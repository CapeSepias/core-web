<tr class="dot-key-value-table-row" [ngClass]="{ 'dot-key-value-table-row-highlight': rowActiveHighlight }">
    <ng-template [ngIf]="isEditing" [ngIfElse]="editable">
        <td>
            {{ variable.key }}
        </td>
    </ng-template>
    <ng-template #editable>
        <td #keyCell [pEditableColumn]="variable.key" pEditableColumnField="key">
            <p-cellEditor>
                <ng-template pTemplate="input">
                    <input
                        pInputText
                        class="field-key-input"
                        type="text"
                        [placeholder]="
                            messages['contenttypes.field.variables.key_input.placeholder']
                        "
                        (blur)="rowActiveHighlight = false; editFieldInit($event)"
                        (focus)="editFieldInit($event)"
                        (keyup)="editFieldInit($event)"
                        (keydown.escape)="onCancel($event)"
                        (keydown.enter)="onPressEnter($event)"
                        [(ngModel)]="variable.key"
                    />
                </ng-template>
                <ng-template pTemplate="output">
                    <span *ngIf="variable.key">
                        {{ variable.key }}
                    </span>
                    <span class="empty-placeholder" *ngIf="!variable.key">
                        {{ messages['contenttypes.field.variables.key_input.placeholder'] }}
                    </span>
                </ng-template>
            </p-cellEditor>
        </td>
    </ng-template>

    <td #valueCell [pEditableColumn]="variable.value" pEditableColumnField="value">
        <p-cellEditor>
            <ng-template pTemplate="input">
                <input
                    pInputText
                    class="field-value-input"
                    type="text"
                    [placeholder]="messages['contenttypes.field.variables.value_input.placeholder']"
                    (blur)="rowActiveHighlight = false"
                    (focus)="editFieldInit($event)"
                    (keyup)="editFieldInit($event)"
                    (keydown.escape)="onCancel($event)"
                    (keydown.enter)="onPressEnter($event)"
                    [(ngModel)]="variable.value"
                />
            </ng-template>
            <ng-template pTemplate="output">
                <span *ngIf="variable.value">
                    {{ variable.value }}
                </span>
                <span class="empty-placeholder" *ngIf="!variable.value">
                    {{ messages['contenttypes.field.variables.value_input.placeholder'] }}
                </span>
            </ng-template>
        </p-cellEditor>
    </td>
    <td class="dot-key-value-table-row__variables-actions">
        <ng-template [ngIf]="showEditMenu" [ngIfElse]="formButtons">
            <button
                pButton
                secondary
                tiny
                class="dot-key-value-table-row__variables-actions-edit-cancel"
                [label]="messages['contenttypes.action.cancel']"
                (blur)="rowActiveHighlight = false"
                (focus)="rowActiveHighlight = true"
                (click)="onCancel($event)"
            ></button>
            <button
                #saveButton
                pButton
                tiny
                class="dot-key-value-table-row__variables-actions-edit-save"
                [label]="messages['contenttypes.action.save']"
                [disabled]="saveDisabled"
                (blur)="rowActiveHighlight = false"
                (focus)="rowActiveHighlight = true"
                (click)="saveVariable()"
            ></button>
        </ng-template>
        <ng-template #formButtons>
            <dot-icon-button
                *ngIf="variableIndex"
                icon="delete_outline"
                (click)="delete.emit(variableIndex)"
            ></dot-icon-button>
            <dot-icon-button
                icon="edit"
                (click)="focusKeyInput($event)"
            ></dot-icon-button>
        </ng-template>
    </td>
</tr>
