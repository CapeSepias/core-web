{"version":3,"sources":["view_hydrator_spec.js"],"names":[],"mappings":"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","file":"angular2/test/render/dom/view/view_hydrator_spec.es6","sourcesContent":["import {\n  AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  xdescribe,\n  describe,\n  el,\n  dispatchEvent,\n  expect,\n  iit,\n  inject,\n  beforeEachBindings,\n  it,\n  xit,\n  SpyObject, proxy\n} from 'angular2/test_lib';\nimport {IMPLEMENTS, isBlank, isPresent} from 'angular2/src/facade/lang';\n\nimport {RenderProtoView} from 'angular2/src/render/dom/view/proto_view';\nimport {ElementBinder} from 'angular2/src/render/dom/view/element_binder';\nimport {RenderView} from 'angular2/src/render/dom/view/view';\nimport {ShadowDomStrategy} from 'angular2/src/render/dom/shadow_dom/shadow_dom_strategy';\nimport {LightDom} from 'angular2/src/render/dom/shadow_dom/light_dom';\nimport {EventManager} from 'angular2/src/render/dom/events/event_manager';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {ViewFactory} from 'angular2/src/render/dom/view/view_factory';\nimport {RenderViewHydrator} from 'angular2/src/render/dom/view/view_hydrator';\n\nexport function main() {\n\n  describe('RenderViewHydrator', () => {\n    var shadowDomStrategy;\n    var eventManager;\n    var viewFactory;\n    var viewHydrator;\n\n    function createProtoView({rootEl, binders}={}) {\n      if (isBlank(rootEl)) {\n        rootEl = el('<div></div>');\n      }\n      if (isBlank(binders)) {\n        binders = [];\n      }\n      return new RenderProtoView({\n        element: rootEl,\n        elementBinders: binders\n      });\n    }\n\n    function createComponentElBinder(componentId, nestedProtoView = null) {\n      var binder = new ElementBinder({\n        componentId: componentId,\n        textNodeIndices: []\n      });\n      binder.nestedProtoView = nestedProtoView;\n      return binder;\n    }\n\n    function createHostProtoView(nestedProtoView) {\n      return createProtoView({\n          binders: [\n            createComponentElBinder(\n              'someComponent',\n              nestedProtoView\n            )\n          ]\n        });\n    }\n\n    function createEmptyView() {\n      var root = el('<div><div></div></div>');\n      return new RenderView(createProtoView(), [DOM.childNodes(root)[0]],\n        [], [], []);\n    }\n\n    function createHostView(pv, shadowDomView) {\n      var view = new RenderView(pv, [el('<div></div>')],\n        [], [el('<div></div>')], [null]);\n      ViewFactory.setComponentView(shadowDomStrategy, view, 0, shadowDomView);\n      return view;\n    }\n\n    function hydrate(view) {\n      viewHydrator.hydrateInPlaceHostView(null, view);\n    }\n\n    function dehydrate(view) {\n      viewHydrator.dehydrateInPlaceHostView(null, view);\n    }\n\n    beforeEach( () => {\n      eventManager = new SpyEventManager();\n      shadowDomStrategy = new SpyShadowDomStrategy();\n      shadowDomStrategy.spy('constructLightDom').andCallFake( (lightDomView, shadowDomView, el) => {\n        return new SpyLightDom();\n      });\n      viewFactory = new SpyViewFactory();\n      viewHydrator = new RenderViewHydrator(eventManager, viewFactory, shadowDomStrategy);\n    });\n\n    describe('hydrateDynamicComponentView', () => {\n\n      it('should redistribute', () => {\n        var shadowView = createEmptyView();\n        var hostPv = createHostProtoView(createProtoView());\n        var hostView = createHostView(hostPv, shadowView);\n        viewHydrator.hydrateDynamicComponentView(hostView, 0, shadowView);\n        var lightDomSpy:SpyLightDom = hostView.lightDoms[0];\n        expect(lightDomSpy.spy('redistribute')).toHaveBeenCalled();\n      });\n\n    });\n\n    describe('hydrateInPlaceHostView', () => {\n\n      function createInPlaceHostView() {\n        var hostPv = createHostProtoView(createProtoView());\n        var shadowView = createEmptyView();\n        return createHostView(hostPv, shadowView);\n      }\n\n      it('should hydrate the view', () => {\n        var hostView = createInPlaceHostView();\n        viewHydrator.hydrateInPlaceHostView(null, hostView);\n\n        expect(hostView.hydrated).toBe(true);\n      });\n\n      it('should store the view in the parent view', () => {\n        var parentView = createEmptyView();\n        var hostView = createInPlaceHostView();\n\n        viewHydrator.hydrateInPlaceHostView(parentView, hostView);\n\n        expect(parentView.imperativeHostViews).toEqual([hostView]);\n\n      });\n\n    });\n\n    describe('dehydrateInPlaceHostView', () => {\n\n      function createAndHydrateInPlaceHostView(parentView) {\n        var hostPv = createHostProtoView(createProtoView());\n        var shadowView = createEmptyView();\n        var hostView = createHostView(hostPv, shadowView);\n        viewHydrator.hydrateInPlaceHostView(parentView, hostView);\n        return hostView;\n      }\n\n      it('should clear the host view', () => {\n        var parentView = createEmptyView();\n        var hostView = createAndHydrateInPlaceHostView(parentView);\n\n        var rootNodes = hostView.rootNodes;\n        expect(rootNodes[0].parentNode).toBeTruthy();\n\n        viewHydrator.dehydrateInPlaceHostView(parentView, hostView);\n\n        expect(parentView.imperativeHostViews).toEqual([]);\n        expect(rootNodes[0].parentNode).toBeFalsy();\n        expect(hostView.rootNodes).toEqual([]);\n      });\n\n    });\n\n    describe('hydrate... shared functionality', () => {\n\n      it('should hydrate existing child components', () => {\n        var hostPv = createHostProtoView(createProtoView());\n        var shadowView = createEmptyView();\n        createHostView(hostPv, shadowView);\n\n        hydrate(shadowView);\n\n        expect(shadowView.hydrated).toBe(true);\n      });\n\n    });\n\n    describe('dehydrate... shared functionality', () => {\n      var hostView;\n\n      function createAndHydrate(nestedProtoView, shadowView, imperativeHostView = null) {\n        var hostPv = createHostProtoView(nestedProtoView);\n        hostView = createHostView(hostPv, shadowView);\n        if (isPresent(imperativeHostView)) {\n          viewHydrator.hydrateInPlaceHostView(hostView, imperativeHostView);\n        }\n\n        hydrate(hostView);\n      }\n\n      it('should dehydrate child components', () => {\n        var shadowView = createEmptyView();\n        createAndHydrate(createProtoView(), shadowView);\n\n        expect(shadowView.hydrated).toBe(true);\n        dehydrate(hostView);\n\n        expect(shadowView.hydrated).toBe(false);\n      });\n\n      it('should not clear static child components', () => {\n        var shadowView = createEmptyView();\n        createAndHydrate(createProtoView(), shadowView);\n        dehydrate(hostView);\n\n        expect(hostView.componentChildViews[0]).toBe(shadowView);\n        expect(shadowView.rootNodes[0].parentNode).toBeTruthy();\n        expect(viewFactory.spy('returnView')).not.toHaveBeenCalled();\n      });\n\n      it('should clear dynamic child components', () => {\n        var shadowView = createEmptyView();\n        createAndHydrate(null, shadowView);\n        expect(shadowView.rootNodes[0].parentNode).toBeTruthy();\n\n        dehydrate(hostView);\n\n        expect(hostView.componentChildViews[0]).toBe(null);\n        expect(shadowView.rootNodes[0].parentNode).toBe(null);\n        expect(viewFactory.spy('returnView')).toHaveBeenCalledWith(shadowView);\n      });\n\n      it('should clear views in ViewContainers', () => {\n        createAndHydrate(null, null);\n        var vc = hostView.getOrCreateViewContainer(0);\n        var childView = createEmptyView();\n        vc.insert(childView);\n\n        dehydrate(hostView);\n\n        expect(viewFactory.spy('returnView')).toHaveBeenCalledWith(childView);\n      });\n\n      it('should clear imperatively added child components', () => {\n        var shadowView = createEmptyView();\n        createAndHydrate(createProtoView(), shadowView);\n        var impHostView = createHostView(createHostProtoView(createProtoView()), createEmptyView());\n        shadowView.imperativeHostViews = [impHostView];\n\n        var rootNodes = impHostView.rootNodes;\n        expect(rootNodes[0].parentNode).toBeTruthy();\n\n        dehydrate(hostView);\n\n        expect(shadowView.imperativeHostViews).toEqual([]);\n        expect(impHostView.rootNodes).toEqual([]);\n        expect(rootNodes[0].parentNode).toBeFalsy();\n        expect(viewFactory.spy('returnView')).toHaveBeenCalledWith(impHostView);\n      });\n\n    });\n\n  });\n}\n\n@proxy\n@IMPLEMENTS(EventManager)\nclass SpyEventManager extends SpyObject {\n  constructor(){super(EventManager);}\n  noSuchMethod(m){return super.noSuchMethod(m)}\n}\n\n@proxy\n@IMPLEMENTS(ShadowDomStrategy)\nclass SpyShadowDomStrategy extends SpyObject {\n  constructor(){super(ShadowDomStrategy);}\n  noSuchMethod(m){return super.noSuchMethod(m)}\n}\n\n@proxy\n@IMPLEMENTS(LightDom)\nclass SpyLightDom extends SpyObject {\n  constructor(){super(LightDom);}\n  noSuchMethod(m){return super.noSuchMethod(m)}\n}\n\n@proxy\n@IMPLEMENTS(ViewFactory)\nclass SpyViewFactory extends SpyObject {\n  constructor(){super(ViewFactory);}\n  noSuchMethod(m){return super.noSuchMethod(m)}\n}\n"]}