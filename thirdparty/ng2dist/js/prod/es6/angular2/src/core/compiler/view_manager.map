{"version":3,"sources":["view_manager.js"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/view_manager.es6","sourcesContent":["import {Injector, Injectable, Binding} from 'angular2/di';\nimport {ListWrapper, MapWrapper, Map, StringMapWrapper, List} from 'angular2/src/facade/collection';\nimport {isPresent, isBlank, BaseException} from 'angular2/src/facade/lang';\nimport * as viewModule from './view';\nimport {ElementRef} from './element_ref';\nimport {ProtoViewRef, ViewRef, internalView, internalProtoView} from './view_ref';\nimport {ViewContainerRef} from './view_container_ref';\nimport {Renderer, RenderViewRef, RenderViewContainerRef} from 'angular2/src/render/api';\nimport {AppViewManagerUtils} from './view_manager_utils';\nimport {AppViewPool} from './view_pool';\n\n/**\n * Entry point for creating, moving views in the view hierarchy and destroying views.\n * This manager contains all recursion and delegates to helper methods\n * in AppViewManagerUtils and the Renderer, so unit tests get simpler.\n */\n@Injectable()\nexport class AppViewManager {\n  _viewPool:AppViewPool;\n  _utils:AppViewManagerUtils;\n  _renderer:Renderer;\n\n  constructor(viewPool:AppViewPool, utils:AppViewManagerUtils, renderer:Renderer) {\n    this._renderer = renderer;\n    this._viewPool = viewPool;\n    this._utils = utils;\n  }\n\n  getViewContainer(location:ElementRef):ViewContainerRef {\n    var hostView = internalView(location.parentView);\n    return hostView.elementInjectors[location.boundElementIndex].getViewContainerRef();\n  }\n\n  getComponent(hostLocation:ElementRef):any {\n    var hostView = internalView(hostLocation.parentView);\n    var boundElementIndex = hostLocation.boundElementIndex;\n    return this._utils.getComponentInstance(hostView, boundElementIndex);\n  }\n\n  createDynamicComponentView(hostLocation:ElementRef,\n      componentProtoViewRef:ProtoViewRef, componentBinding:Binding, injector:Injector):ViewRef {\n    var componentProtoView = internalProtoView(componentProtoViewRef);\n    var hostView = internalView(hostLocation.parentView);\n    var boundElementIndex = hostLocation.boundElementIndex;\n    var binder = hostView.proto.elementBinders[boundElementIndex];\n    if (!binder.hasDynamicComponent()) {\n      throw new BaseException(`There is no dynamic component directive at element ${boundElementIndex}`)\n    }\n\n    var componentView = this._createViewRecurse(componentProtoView);\n    var renderViewRefs = this._renderer.createDynamicComponentView(hostView.render, boundElementIndex, componentProtoView.render);\n    componentView.render = renderViewRefs[0];\n    this._utils.attachComponentView(hostView, boundElementIndex, componentView);\n    this._utils.hydrateDynamicComponentInElementInjector(hostView, boundElementIndex, componentBinding, injector);\n    this._utils.hydrateComponentView(hostView, boundElementIndex);\n    this._viewHydrateRecurse(componentView, renderViewRefs, 1);\n\n    return new ViewRef(componentView);\n  }\n\n  createInPlaceHostView(parentComponentLocation:ElementRef,\n      hostElementSelector, hostProtoViewRef:ProtoViewRef, injector:Injector):ViewRef {\n    var hostProtoView = internalProtoView(hostProtoViewRef);\n    var parentComponentHostView = null;\n    var parentComponentBoundElementIndex = null;\n    var parentRenderViewRef = null;\n    if (isPresent(parentComponentLocation)) {\n      parentComponentHostView = internalView(parentComponentLocation.parentView);\n      parentComponentBoundElementIndex = parentComponentLocation.boundElementIndex;\n      parentRenderViewRef = parentComponentHostView.componentChildViews[parentComponentBoundElementIndex].render;\n    }\n    var hostView = this._createViewRecurse(hostProtoView);\n    var renderViewRefs = this._renderer.createInPlaceHostView(parentRenderViewRef, hostElementSelector, hostProtoView.render);\n    hostView.render = renderViewRefs[0];\n    this._utils.attachAndHydrateInPlaceHostView(parentComponentHostView, parentComponentBoundElementIndex, hostView, injector);\n    this._viewHydrateRecurse(hostView, renderViewRefs, 1);\n    return new ViewRef(hostView);\n  }\n\n  destroyInPlaceHostView(parentComponentLocation:ElementRef, hostViewRef:ViewRef) {\n    var hostView = internalView(hostViewRef);\n    var parentView = null;\n    var parentRenderViewRef = null;\n    if (isPresent(parentComponentLocation)) {\n      parentView = internalView(parentComponentLocation.parentView).componentChildViews[parentComponentLocation.boundElementIndex];\n      parentRenderViewRef = parentView.render;\n    }\n    var hostViewRenderRef = hostView.render;\n    this._viewDehydrateRecurse(hostView);\n    this._utils.detachInPlaceHostView(parentView, hostView);\n    this._renderer.destroyInPlaceHostView(parentRenderViewRef, hostViewRenderRef);\n    this._destroyView(hostView);\n  }\n\n  createViewInContainer(viewContainerLocation:ElementRef,\n      atIndex:number, protoViewRef:ProtoViewRef, injector:Injector = null):ViewRef {\n    var protoView = internalProtoView(protoViewRef);\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n\n    var view = this._createViewRecurse(protoView);\n    var renderViewRefs = this._renderer.createViewInContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex, view.proto.render);\n    view.render = renderViewRefs[0];\n\n    this._utils.attachViewInContainer(parentView, boundElementIndex, atIndex, view);\n    this._utils.hydrateViewInContainer(parentView, boundElementIndex, atIndex, injector);\n    this._viewHydrateRecurse(view, renderViewRefs, 1);\n    return new ViewRef(view);\n  }\n\n  destroyViewInContainer(viewContainerLocation:ElementRef, atIndex:number) {\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._viewDehydrateRecurse(view);\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.destroyViewInContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex);\n    this._destroyView(view);\n  }\n\n  attachViewInContainer(viewContainerLocation:ElementRef, atIndex:number, viewRef:ViewRef):ViewRef {\n    var view = internalView(viewRef);\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    this._utils.attachViewInContainer(parentView, boundElementIndex, atIndex, view);\n    this._renderer.insertViewIntoContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex, view.render);\n    return viewRef;\n  }\n\n  detachViewInContainer(viewContainerLocation:ElementRef, atIndex:number):ViewRef {\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.detachViewFromContainer(this._getRenderViewContainerRef(parentView, boundElementIndex), atIndex);\n    return new ViewRef(view);\n  }\n\n  _getRenderViewContainerRef(parentView:viewModule.AppView, boundElementIndex:number) {\n    return new RenderViewContainerRef(parentView.render, boundElementIndex);\n  }\n\n  _createViewRecurse(protoView:viewModule.AppProtoView) {\n    var view = this._viewPool.getView(protoView);\n    if (isBlank(view)) {\n      view = this._utils.createView(protoView, this, this._renderer);\n      var binders = protoView.elementBinders;\n      for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n        var binder = binders[binderIdx];\n        if (binder.hasStaticComponent()) {\n          var childView = this._createViewRecurse(binder.nestedProtoView);\n          this._utils.attachComponentView(view, binderIdx, childView);\n        }\n      }\n    }\n    return view;\n  }\n\n  _destroyView(view:viewModule.AppView) {\n    this._viewPool.returnView(view);\n  }\n\n  _viewHydrateRecurse(\n      view:viewModule.AppView,\n      renderComponentViewRefs:List<RenderViewRef>,\n      renderComponentIndex:number):number {\n    this._renderer.setEventDispatcher(view.render, view);\n\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; ++i) {\n      if (binders[i].hasStaticComponent()) {\n        var childView = view.componentChildViews[i];\n        childView.render = renderComponentViewRefs[renderComponentIndex++];\n        this._utils.hydrateComponentView(view, i);\n        renderComponentIndex = this._viewHydrateRecurse(\n          view.componentChildViews[i],\n          renderComponentViewRefs,\n          renderComponentIndex\n        );\n      }\n    }\n    return renderComponentIndex;\n  }\n\n  _viewDehydrateRecurse(view:viewModule.AppView) {\n    this._utils.dehydrateView(view);\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; i++) {\n      var componentView = view.componentChildViews[i];\n      if (isPresent(componentView)) {\n        this._viewDehydrateRecurse(componentView);\n        if (binders[i].hasDynamicComponent()) {\n          this._utils.detachComponentView(view, i);\n          this._destroyView(componentView);\n        }\n      }\n      var vc = view.viewContainers[i];\n      if (isPresent(vc)) {\n        for (var j = vc.views.length - 1; j >= 0; j--) {\n          var childView = vc.views[j];\n          this._viewDehydrateRecurse(childView);\n          this._utils.detachViewInContainer(view, i, j);\n          this._destroyView(childView);\n        }\n      }\n    }\n\n    // imperativeHostViews\n    for (var i = 0; i < view.imperativeHostViews.length; i++) {\n      var hostView = view.imperativeHostViews[i];\n      this._viewDehydrateRecurse(hostView);\n      this._utils.detachInPlaceHostView(view, hostView);\n      this._destroyView(hostView);\n    }\n    view.render = null;\n  }\n}"]}